---
/**
 * Cloudflare Web Analytics
 * Only renders when token is provided (e.g. via PUBLIC_CF_BEACON_TOKEN env var).
 */
const { token } = Astro.props as { token: string };
const hasToken = Boolean(token && token !== "XXX");
---

{hasToken && (
  <script
    defer
    src="https://static.cloudflareinsights.com/beacon.min.js"
    data-cf-beacon={JSON.stringify({ token })}
  />
)}
