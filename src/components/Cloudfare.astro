---
/**
 * Cloudflare Web Analytics
 * Only renders when token is provided via PUBLIC_CF_BEACON_TOKEN env var.
 * Set PUBLIC_CF_BEACON_TOKEN in your .env file.
 */
const { token } = Astro.props as { token: string };
const hasToken = Boolean(token && token.length > 0);
---

{hasToken && (
  <script
    defer
    src="https://static.cloudflareinsights.com/beacon.min.js"
    data-cf-beacon={JSON.stringify({ token })}
  />
)}
